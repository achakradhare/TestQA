function Zd_HB_Video(g,h,k,l){zinr_debugParam&&console.log(zinr_getTimestamp()+" ZINC Log : Rubicon adapter initialize");var a=this;this.config=g;this.vast_url=h;this.callbackFunc=k;this.timeout=l-200;this.init=function(){this.initializeRubicon();this.timeoutdone()};this.initializeRubicon=function(){zinr_debugParam&&console.log(zinr_getTimestamp()+" ZINC Log : Call made to Rubicon vulcan.js");var b=document.createElement("script");b.async=!0;b.type="text/javascript";b.src=("https:"===document.location.protocol?
"https":"http")+"://ads.aws.rubiconproject.com/video/vulcan.min.js";b.onload=window.onreadystatechange=function(){zinr_debugParam&&console.log(zinr_getTimestamp()+" ZINC Log : Loaded Rubicon vulcan.js");a.registerRubiconSlots()};var d=document.getElementsByTagName("head")[0];d.insertBefore(b,d.firstChild)};this.timeoutdone=function(){a.timeout=setTimeout(function(){zinr_debugParam&&console.log(zinr_getTimestamp()+" ZINC Log : Timeout from video header bidding side");clearTimeout(a.timeout);a.vast_url=
""},a.timeout)};this.registerRubiconSlots=function(){rubicontag.video.defineSlot("mySlotId",{account_id:a.config.account_id,site_id:a.config.site_id,zone_id:a.config.zone_id,size_id:a.config.size_id,width:a.config.width,height:a.config.height});rubicontag.video.run(a.parseRubiconResult)};this.parseRubiconResult=function(){var b=0,d;rubicontag.video.getAllSlots().forEach(function(a,c){var e=a.getBestCpm();"ok"===e.status&&"vast"===e.type&&(b=e.cpm,d=e.depot_url)});zinr_debugParam&&console.log(zinr_getTimestamp()+
" ZINC Log : cpm value:"+b+" -- vast tag: "+a.vast_url);if(""!==a.vast_url)if(clearTimeout(zinr_hbTimer),clearTimeout(a.timeout),0<b){var c;c=0<a.vast_url.indexOf("&ct=")?a.vast_url.replace(/&ct=(.*?)&/,"&ct=$1&pb_bp:"+b+"^pb_bidder:rubicon&"):a.vast_url+"&ct=pb_bp:"+b+"^pb_bidder:rubicon";a.callAdserver(c,d)}else a.callbackFunc(a.vast_url)};this.callAdserver=function(b,d){zinr_debugParam&&console.log(zinr_getTimestamp()+" ZINC Log : Call made to adserver with vast url");var c=new window.XMLHttpRequest,
f="";c.open("GET",b,!0);c.withCredentials=!0;c.onreadystatechange=function(){4===c.readyState&&200===c.status&&(f=c.responseText.replace(/http:\/\/dummyurlforrubicon.com/,d),zinr_debugParam&&console.log(zinr_getTimestamp()+" ZINC Log : Replaced Rubicon url in xml response"),a.callbackFunc(f))};c.send()}};